!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Graphon=e():t.Graphon=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=':root{--color-bg:#fff;--color-gray:#939ca1;--gray-line:rgba(24,45,59,0.1);--button-bg:#fff;--button-color:#000;--button-border:#e6e6e6;--button-bg-current:#e3f3ff;--button-border-current:#c5e2fa;--minimap-overlays-color:rgba(245,244,245,0.65);--minimap-scaler-bg:rgba(137,138,152,0.7);--minimap-scaler-bg--hover:#898a98;@custom-media --mobile (max-width: 1000px)}.tg--night-mode{--color-bg:#2b3037;--color-gray:rgba(217,242,255,0.27);--gray-line:hsla(0,0%,100%,0.1);--button-color:#fff;--button-bg:#293039;--button-border:hsla(0,0%,100%,0.2);--button-border-current:rgba(195,214,231,0.26);--button-bg-current:rgba(131,145,163,0.11);--minimap-overlays-color:rgba(38,41,43,0.62);--minimap-scaler-bg:rgba(109,146,185,0.4);--minimap-scaler-bg--hover:rgba(109,146,185,0.7)}.tg-chart{position:relative;font-size:14px;font-family:Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}.tg-chart__viewport{display:block;overflow-x:hidden}.tg-chart svg{width:100%;height:100%;vertical-align:bottom}.tg-header{margin-bottom:20px;padding:0 0 15px;display:flex;flex-wrap:wrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (--mobile){.tg-header{font-size:15px}}.tg-header__title{flex-basis:100%;margin:0 0 15px;font-weight:600;font-size:18px}.tg-header__dates{margin-top:auto;font-size:15px;margin-bottom:auto}@media (--mobile){.tg-header__dates{font-size:13px}}.tg-header__type-switcher{display:inline-flex;background:#fff;background:var(--button-bg);border:1px solid #e6e6e6;border:1px solid var(--button-border);box-sizing:border-box;box-shadow:0 1px 1px 0 rgba(0,0,0,.03);border-radius:2px;height:34px;line-height:32px;padding:0 9px;font-size:14px;font-weight:500;cursor:pointer;z-index:99;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}.tg-header__type-switcher:hover{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border-color:#d8d8d8}.tg-header__type-switcher{width:34px;margin-right:5px}.tg-header__type-switcher--current{background:#e3f3ff;background:var(--button-bg-current);border:1px solid #c5e2fa;border:1px solid var(--button-border-current);border-radius:2px}.tg-header__type-switcher--current:hover{border-color:#add6f8}.tg-header__type-switcher svg{fill:currentColor;margin:auto}.tg-header__type-switcher:last-of-type{margin-right:auto}.tg-header__details{margin-right:15px}.tg-header__details-item{display:inline-flex;background:#fff;background:var(--button-bg);border:1px solid #e6e6e6;border:1px solid var(--button-border);box-sizing:border-box;box-shadow:0 1px 1px 0 rgba(0,0,0,.03);border-radius:2px;height:34px;line-height:32px;padding:0 9px;font-size:14px;font-weight:500;cursor:pointer;z-index:99;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}.tg-header__details-item:hover{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border-color:#d8d8d8}.tg-header__details-item{min-width:70px;justify-content:center}.tg-header__details-item--current{background:#e3f3ff;background:var(--button-bg-current);border:1px solid #c5e2fa;border:1px solid var(--button-border-current);border-radius:2px}.tg-header__details-item--current:hover{border-color:#add6f8}.tg-header__details-item svg{fill:currentColor}.tg-header__details-item:first-of-type:not(.tg-header__details-item--current){border-right:0;min-width:69px}.tg-header__details-item--current+.tg-header__details-item{border-left:0;min-width:69px}.tg-header__details-item:not(:last-of-type){border-radius:2px 0 0 2px}.tg-header__details-item:not(:first-of-type){border-radius:0 2px 2px 0}.tg-legend{font-family:Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,sans-serif;display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;align-items:flex-start}.tg-legend__item{padding:5px 0;box-shadow:none;display:flex;align-items:center;cursor:pointer;color:#818181}.tg-legend__item:hover{color:#666}.tg-legend__item--wobble{-webkit-animation:wobble .3s ease-out!important;animation:wobble .3s ease-out!important}.tg-legend__checkbox{display:inline-flex;background:#fff;background:var(--button-bg);border:1px solid #e6e6e6;border:1px solid var(--button-border);box-sizing:border-box;box-shadow:0 1px 1px 0 rgba(0,0,0,.03);border-radius:2px;height:34px;line-height:32px;padding:0 9px;font-size:14px;font-weight:500;cursor:pointer;z-index:99;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}.tg-legend__checkbox:hover{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border-color:#d8d8d8}.tg-legend__checkbox{position:relative;width:24px;height:24px;margin:auto 7px auto 0;border:0}.tg-legend__checkbox--current{background:#e3f3ff;background:var(--button-bg-current);border:1px solid #c5e2fa;border:1px solid var(--button-border-current);border-radius:2px}.tg-legend__checkbox--current:hover{border-color:#add6f8}.tg-legend__checkbox svg{fill:currentColor}.tg-legend__checkbox:before{content:"";position:absolute;left:6px;top:6px;display:inline-block;width:11px;height:6px;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);opacity:0}.tg-legend__item:hover .tg-legend__checkbox{opacity:.9}@-webkit-keyframes wobble{0%{opacity:.5;transform:scale(.95)}25%{opacity:1}75%{opacity:.5;transform:scale(1.05)}to{opacity:1}}@keyframes wobble{0%{opacity:.5;transform:scale(.95)}25%{opacity:1}75%{opacity:.5;transform:scale(1.05)}to{opacity:1}}.tg-legend__item--enabled{color:#000}.tg-legend__item--enabled .tg-legend__checkbox:before{opacity:1;-webkit-animation:rolling .2s ease;animation:rolling .2s ease;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes rolling{0%{transform:rotate(-45deg) scale(1.4);opacity:0}to{transform:rotate(-45deg) scale(1);opacity:1}}@keyframes rolling{0%{transform:rotate(-45deg) scale(1.4);opacity:0}to{transform:rotate(-45deg) scale(1);opacity:1}}.tg-minimap{position:relative;height:60px;margin:10px 0 20px;cursor:pointer;border-radius:3px;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;border:1px solid rgba(24,45,59,.1);border:1px solid var(--gray-line);box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;//border:1px solid #ebebeb}.tg-minimap svg{border-radius:3px;overflow:hidden;height:100%!important;width:100%!important}.tg-minimap__left,.tg-minimap__right{position:absolute;top:0;bottom:0;width:20%;background:rgba(245,244,245,.65);background:var(--minimap-overlays-color);z-index:2;cursor:default;will-change:width}.tg-minimap__left{left:0;border-radius:3px 0 0 3px}.tg-minimap__center{position:absolute;top:-2px;bottom:-2px;width:10px;border-top:2px solid rgba(137,138,152,.7);border-top:2px solid var(--minimap-scaler-bg);border-bottom:2px solid rgba(137,138,152,.7);border-bottom:2px solid var(--minimap-scaler-bg)}.tg-minimap__right{right:0;border-radius:0 3px 3px 0}.tg-minimap__left-scaler,.tg-minimap__right-scaler{position:absolute;height:calc(100% + 4px);top:-2px;z-index:2;cursor:col-resize}.tg-minimap__left-scaler{right:0}.tg-minimap__right-scaler{left:0}.tg-minimap__left-scaler:before,.tg-minimap__right-scaler:before{content:"";position:absolute;height:100%;width:14px;background:rgba(137,138,152,.7);background:var(--minimap-scaler-bg);box-sizing:border-box}.tg-minimap__left-scaler:after,.tg-minimap__right-scaler:after{content:"";position:absolute;height:15px;width:2px;border-radius:5px;background:#fff;top:50%;transform:translateY(-50%)}.tg-minimap__right-scaler:after{left:-6px}.tg-minimap__left-scaler:after{right:-8px}.tg-minimap__left-scaler:before{right:-14px;border-radius:3px 0 0 3px;border-right:0}.tg-minimap__right-scaler:before{left:-12px;border-radius:0 3px 3px 0;border-left:0}.tg-minimap__left-scaler:hover:before,.tg-minimap__right-scaler:hover:before{background:#898a98;background:var(--minimap-scaler-bg--hover)}.tg-chart g,.tg-minimap g{transform-origin:bottom left;will-change:transform}.tg-chart .oy-group,.tg-minimap .oy-group{transition:transform .3s ease;will-change:transform;shape-rendering:optimizespeed}.tg-chart path.scaled{transition:transform .4s ease,opacity .3s ease;will-change:transform,opacity}.tg-chart path,.tg-minimap path{transform-origin:bottom left;transition:opacity .3s ease;will-change:opacity;shape-rendering:optimizespeed}.tg-chart--line path{shape-rendering:geometricprecision}.tg-chart .tg-graph--hidden,.tg-minimap .tg-graph--hidden{opacity:0}.tg-bar{will-change:opacity,transform;transition:opacity .35s ease,transform .3s ease}.tg-bar--hidden{opacity:0}.tg-chart .tg-bar--hidden{transform:matrix(1,0,0,.1,0,50)}.tg-minimap .tg-bar{transition:none!important}.tg-bar rect{will-change:height,y;shape-rendering:optimizespeed}.tg-chart__overlays{will-change:opacity;transition:opacity .25s ease}.tg-chart__overlay-left,.tg-chart__overlay-right{fill:#fff;opacity:.5;will-change:width,x}.tg-area{will-change:opacity,transform!important;transition:all .17s ease!important}.tg-area--hidden{transform:scaleY(0)!important}.tg-chart footer{margin-top:10px;height:18px;color:#939ca1;color:var(--color-gray);font-size:12px;font-family:Roboto,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,sans-serif;line-height:1em;position:relative}.tg-chart time{position:absolute;display:block;white-space:nowrap;transition:opacity .25s ease;will-change:opacity,transform;-webkit-animation:fade-in .25s ease;animation:fade-in .25s ease}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.tg-chart time.hided{opacity:0}.tg-pointer{position:absolute;top:0;left:0;opacity:0;will-change:opacity,left}.tg-pointer--showed{opacity:1}.tg-pointer:before{content:"";position:absolute;top:0;left:0;bottom:0;width:1px;background:rgba(170,181,191,.33)}.tg-chart--area .tg-pointer:before{background-color:hsla(0,0%,100%,.2)}.tg-pointer__pointer{display:inline-block;width:10px;height:10px;border:3px solid #1f2938;background:#fff;border-radius:50%;position:absolute;left:-5px;bottom:0;margin-bottom:-5px;box-sizing:border-box;z-index:2;will-change:transform}.tg-pointer__pointer--hidden{display:none}.tg-grid{top:0;color:#939ca1;color:var(--color-gray);font-size:12px;font-family:Roboto,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,sans-serif}.tg-grid,.tg-grid__section{position:absolute;right:0;left:0}.tg-grid__section{bottom:0;padding-bottom:5px;border-bottom:1px solid rgba(24,45,59,.1);border-bottom:1px solid var(--gray-line);transition:transform .28s ease,opacity .35s ease,bottom .28s ease;will-change:transfrom,opacity}.tg-grid__counter{transition:opacity .3s ease;will-change:opacity}.tg-grid__counter--hidden{opacity:0}.tg-chart--line .tg-grid__counter{display:inline-block;background:#fff;background:var(--color-bg);color:#939ca1;color:var(--color-gray);border-radius:2px;padding:2px 4px;margin:0 -2px}.tg-grid__counter--second{float:right}.tg-grid__section--hidden{opacity:0;transform:translateY(-50px);visibility:hidden}@-webkit-keyframes jump-in{0%{transform:translateY(-30px);opacity:0}to{transform:none;opacity:1}}@keyframes jump-in{0%{transform:translateY(-30px);opacity:0}to{transform:none;opacity:1}}.tg-tooltip{position:absolute;background:#fff;border-radius:10px;box-shadow:0 1px 4px 0 rgba(0,0,0,.13);top:20px;padding:10px 15px;z-index:3;transition:left .3s ease,opacity .4s ease;will-change:left,opacity;opacity:0;min-width:180px;font-size:13px;font-family:Roboto,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,sans-serif;line-height:18px}.tg-tooltip--showed{opacity:1}.tg-tooltip__title{display:block;min-height:1.1em;font-weight:500;white-space:nowrap}.tg-tooltip__title .left{position:relative;margin-right:5px;display:inline-block;vertical-align:top}.tg-tooltip__title .left span{right:auto;left:0}.tg-tooltip__values{display:flex;flex-direction:column}.tg-tooltip__values-item{display:flex;margin-top:5px}.tg-tooltip__values-item:first-of-type{margin-top:7px}.tg-tooltip__values-item-title{display:inline-block;padding-right:20px}.tg-tooltip .percents{display:inline-block;font-weight:500;min-width:26px;text-align:right;margin-right:10px}.tg-tooltip__values-item b{display:block;margin-left:auto;white-space:nowrap;position:relative;font-weight:700}.counter-prev{-webkit-animation:exit .4s ease;animation:exit .4s ease;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.counter-cur,.counter-prev{position:absolute;will-change:transform,opacity;right:0;height:1em}.counter-cur{-webkit-animation:enter .4s ease;animation:enter .4s ease;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.counter-prev.top{-webkit-animation:exitTop .3s ease;animation:exitTop .3s ease;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.counter-cur.top{-webkit-animation:enterTop .3s ease;animation:enterTop .3s ease;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes exit{0%{transform:none;opacity:1}to{transform:translateY(-1px) scale(1.35);opacity:0}}@keyframes exit{0%{transform:none;opacity:1}to{transform:translateY(-1px) scale(1.35);opacity:0}}@-webkit-keyframes enter{0%{transform:scale(.85) translateX(-2px);opacity:0}80%{transform:scale(1.05);opacity:1}to{transform:none}}@keyframes enter{0%{transform:scale(.85) translateX(-2px);opacity:0}80%{transform:scale(1.05);opacity:1}to{transform:none}}@-webkit-keyframes exitTop{0%{transform:none;opacity:1}to{transform:translateY(-5px);opacity:0}}@keyframes exitTop{0%{transform:none;opacity:1}to{transform:translateY(-5px);opacity:0}}@-webkit-keyframes enterTop{0%{transform:translateY(5px);opacity:0}to{transform:none;opacity:1}}@keyframes enterTop{0%{transform:translateY(5px);opacity:0}to{transform:none;opacity:1}}.tg--night-mode{background:#2b3037;color:#fff}.tg--night-mode .tg-legend__item{border-color:#384757}.tg--night-mode .tg-tooltip{background:#1c2533;color:#fff;box-shadow:none}.tg--night-mode .tg-tooltip__title{color:#fff}.tg--night-mode .tg-pointer__pointer{background:#2b3037}.tg--night-mode .tg-chart__overlays rect{fill:#2b3037}.tg--night-mode .tg-grid__section{border-color:rgba(24,45,59,.1);border-color:var(--gray-line)}.tg--night-mode .tg-chart footer,.tg--night-mode .tg-grid{color:#939ca1;color:var(--color-gray)}.tg--night-mode .all b{color:#fff!important}'},function(t,e,i){"use strict";i.r(e);var s=i(0),r=i.n(s);class o{constructor(t,e,i,s,r,o,a,h){const n=t.split("\n");this.columns=[],this.dates=[],this.type=s,this.title=r,this.byMonth=o,this.height=h,n.forEach(t=>{let[e,...i]=t.split(",");i.forEach((t,e)=>{t=parseFloat(t),t=Math.round(100*t)/100,this.columns[e]?this.columns[e].push(t):this.columns[e]=[t]}),this.dates.push(e)}),this.colors=e,this.names=i,this.isYScaled=a||!1,this._cache={getLinePoints:{},dates:this.columns[0],daysCount:this.columns[0].length},this._recalculatedPoints=[]}get linesAvailable(){return Object.keys(this.names)}get daysCount(){return this._cache.daysCount}getLinePoints(t){return this._cache.getLinePoints[t]?this._cache.getLinePoints[t]:(this._cache.getLinePoints[t]=this.getColumnByName(t),this._cache.getLinePoints[t])}getColumnByName(t){return this.columns[t]}getPointsSlice(t,e,i){return this.getLinePoints(t).slice(e,e+i)}getLineColor(t){return this.colors[t]}getChartType(t){return this.types[t]}getCommonChartsType(){return this.type}getPrevChartValueForPoint(t,e){let i=this.linesAvailable[t-1];return this.getLinePoints(i)[e]}getStacks(){if(this._cache.stacks)return this._cache.stacks;let t=this.daysCount,e=[];for(let i=0;i<t;i++){let t=this.getStackForPoint(i);e.push(t)}return this._cache.stacks=e,this._cache.stacks}getStackForPoint(t,e=[]){let i=0;return this.linesAvailable.forEach(s=>{e.includes(s)||(i+=this.getLinePoints(s)[t])}),i}getMaximumAccumulatedByColumns(t=0,e=this.daysCount,i=[]){let s=0;for(let r=t;r<e;r++){let t=this.getStackForPoint(r,i);s<t&&(s=t)}return s}getOhterTypes(t){return Object.keys(this.types).filter(e=>e!==t)}get max(){const t=this.linesAvailable.map(t=>Math.max(...this.getLinePoints(t)));return Math.max(...t)}maxForLine(t){return Math.max(...this.getLinePoints(t))}get min(){const t=this.linesAvailable.map(t=>Math.min(...this.getLinePoints(t)));return Math.min(...t)}minForLine(t){return Math.min(...this.getLinePoints(t))}getMaxForLineSliced(t,e,i){return Math.max(...this.getPointsSlice(t,e,i))}getMinForLineSliced(t,e,i){return Math.min(...this.getPointsSlice(t,e,i))}get colorsList(){return Object.entries(this.colors).map(([t,e])=>e)}get namesList(){return Object.entries(this.names).map(([t,e])=>e)}saveRecalculatedValues(t){this._recalculatedPoints.push(t)}clearRecalculatedValues(){this._recalculatedPoints=[]}get recalculatedValues(){return this._recalculatedPoints}}function a(t,e,i={}){const s=["svg","path","rect","circle","text","g","animate"].includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);if(Array.isArray(e)&&e.length?s.classList.add(...e):e&&(s.className=e),i&&Object.keys(i).length)for(let t in i)i.hasOwnProperty(t)&&s.setAttribute(t,i[t]);return s}function h(t,e,i,s="default"){let r=a("span",["counter-prev",s]),o=a("span",["counter-cur",s]);t.style.width=7*e.length+"px",r.textContent=i,o.textContent=e,t.innerHTML="",t.appendChild(r),t.appendChild(o)}function n(t){return t.touches?t.touches[0].pageX:t.pageX}class l{constructor({canvasHeight:t,zeroShifting:e,color:i,kY:s,stroke:r,stepX:o,max:h,min:n,isScaled:l}){this.canvasHeight=t,this.zeroShifting=e,this.kY=s,this.stepX=o,this.prevX=0,this.max=h,this.min=n,this.currentMinimum=0,this.path=a("path",null,{"stroke-width":r,stroke:i,fill:"transparent","stroke-linecap":"round","stroke-linejoin":"round","vector-effect":"non-scaling-stroke"}),l&&this.path.classList.add("scaled"),this.pathData=""}static get CSS(){return{graphHidden:"tg-graph--hidden"}}y(t){return Math.round(this.canvasHeight-t*this.kY+this.zeroShifting)}x(t){return t}moveTo(t,e){this.pathData+=`M ${this.x(t)} ${this.y(e)}`}stepTo(t,e){e||(this.prevX=this.prevX+this.stepX),this.pathData+=` L ${this.x(this.prevX)} ${this.y(t)}`}render(){return this.path.setAttribute("d",this.pathData),this.path}get isHidden(){return this.path.classList.contains(l.CSS.graphHidden)}toggleVisibility(t){this.path.classList.toggle(l.CSS.graphHidden,t)}}class d{constructor({canvasHeight:t,kY:e,stepX:i,key:s}){this.canvasHeight=t,this.kY=e,this.key=s,this.prevX=0,this.stepX=i,this.wrapper=a("g"),this.wrapper.setAttribute("class",d.CSS.wrapper),this.wrapper.setAttribute("vector-effect","non-scaling-stroke"),this.hidden=!1,this.wrapper.style.transform=`translateX(-${this.stepX/2}px)`}getAll(){return this.wrapper}static get CSS(){return{wrapper:"tg-bar",graphHidden:"tg-bar--hidden"}}y(t){return this.canvasHeight-t*this.kY}x(t){return t}add(t,e,i,s){let r=e*this.kY-i*this.kY;const o=a("rect");o.setAttribute("width",this.stepX),o.setAttribute("height",r),o.setAttribute("x",this.prevX),o.setAttribute("y",this.y(e-i)),o.setAttribute("fill",s),this.prevX=this.prevX+this.stepX,this.wrapper.appendChild(o)}move(t,e,i){let s=this.wrapper.children[t],r=e*this.kY-i*this.kY;s.setAttribute("height",r),s.setAttribute("y",this.y(e-i))}get isHidden(){return this.hidden}toggleVisibility(t){this.hidden=!this.hidden,this.wrapper.classList.toggle(d.CSS.graphHidden,t)}}class p{constructor({canvasHeight:t,stepX:e,key:i,color:s}){this.canvasHeight=t,this.key=i,this.color=s,this.prevX=0,this.stepX=e,this.hidden=!1,this.path=this.createPath(),this.morphing=void 0,this.pathData=[]}createPath(){let t=a("path",null,{fill:this.color,"vector-effect":"non-scaling-stroke"});return t.classList.add(p.CSS.path),t}getAll(){return this.path}static get CSS(){return{path:"tg-area",graphHidden:"tg-area--hidden"}}y(t){return this.canvasHeight-t}x(t){return t}percentToValue(t){return this.canvasHeight/100*t}valueToPercent(t,e){return 100/e*t}moveTo(t,e,i=0){let s=i?this.valueToPercent(e,i):e;this.pathData.push(`M ${t} ${this.percentToValue(s)}`)}stepTo(t,e,i=!1){let s=100/t*e;isNaN(s)&&(s=100);let r=this.percentToValue(100-s);i||(this.prevX=this.prevX+this.stepX),this.pathData.push(`L ${this.x(this.prevX)} ${this.y(r)}`)}move(t,e,i){let s,r,o=this.pathData[t+1],[a,h,n]=o.trim().split(" ");e>0?(s=100/e*i,r=this.percentToValue(100-s)):r=this.percentToValue(0),this.pathData[t+1]=` L ${h} ${this.y(r)}`}update(){this.morphing=a("animate"),this.morphing.setAttribute("attributeName","d"),this.morphing.setAttribute("attributeType","XML"),this.morphing.setAttribute("dur","170ms"),this.morphing.setAttribute("fill","freeze"),this.morphing.setAttribute("to",this.pathData.join(" ")),this.path.appendChild(this.morphing),this.morphing.beginElement()}finish(){this.pathData.push(`L ${this.x(this.prevX)} ${this.canvasHeight} 0 ${this.canvasHeight} 0 0`),this.path.setAttribute("d",this.pathData.join(" "))}get isHidden(){return this.hidden}toggleVisibility(t){this.hidden=!this.hidden,this.path.classList.toggle(p.CSS.graphHidden,t)}}class c{constructor(t,{stroke:e}){this.modules=t,this.canvas=void 0,this.oyGroup=void 0,this.oxGroup=void 0,this.stepX=45,this.stepY=10,this.strokeWidth=e,this.initialWidth=void 0,this.maxPoint=0,this.minPoint=0,this.kY=1,this.zeroShifting=0,this.currentMinimum=0,this.oyScaling=1,this.zeroShiftingScaling=1,this.charts={},this._width=0,this._height=0}static get CSS(){return{oxGroup:"ox-group",oyGroup:"oy-group"}}get kYScaled(){return this.kY*this.oyScaling}renderCanvas({width:t,height:e}={}){return this.canvas=a("svg"),this.oxGroup=a("g"),this.oyGroup=a("g"),this.oxGroup.setAttribute("class",c.CSS.oxGroup),this.oyGroup.setAttribute("class",c.CSS.oyGroup),this.oyGroup.setAttribute("vector-effect","non-scaling-stroke"),this.oxGroup.setAttribute("vector-effect","non-scaling-stroke"),t?this.width=this.initialWidth=t:this.computeInitialWidth(),e&&(this.height=e),this.computeSteps(),this.oyGroup.appendChild(this.oxGroup),this.canvas.appendChild(this.oyGroup),this.canvas}computeInitialWidth(){this.initialWidth=this.modules.state.daysCount*this.stepX,this.width=this.initialWidth}get width(){return this._width}set width(t){this._width=t,this.canvas.style.width=t+"px"}get height(){return this._height}set height(t){this._height=t,this.canvas.style.height=t+"px"}computeSteps(){this.modules.state.byMonth&&"bar"===this.modules.state.type?this.stepX=this.width/this.modules.state.daysCount:this.stepX=this.width/(this.modules.state.daysCount-1);const t=this.modules.state.max,e=this.modules.state.min,i=[5,10,25,50,100,1e3,500,1e4,5e3,1e5,1e6,1e7];let s=i.reverse().findIndex(i=>{return t-e>i}),r=i[s];t/r<3&&s<i.length-1&&(r=i[s+1]),this.stepY=r}renderCharts(){switch(this.modules.state.getCommonChartsType()){case"bar":this.maxPoint=this.modules.state.getMaximumAccumulatedByColumns(),this.minPoint=this.modules.state.min,this.drawBarCharts();break;case"area":this.maxPoint=this.modules.state.getMaximumAccumulatedByColumns(),this.drawAreaCharts();break;default:case"line":this.modules.state.isYScaled?this.drawScaledLineCharts():(this.maxPoint=this.modules.state.max,this.minPoint=this.modules.state.min,this.drawLineCharts())}}drawAreaCharts(){let t=this.modules.state.linesAvailable.reverse().map(t=>new p({canvasHeight:this.height,stepX:this.stepX,key:t,color:this.modules.state.getLineColor(t)}));const e=this.modules.state.daysCount,i=this.modules.state.getStacks();this.modules.state.linesAvailable.reverse().forEach((e,s)=>{t[s].moveTo(0,this.modules.state.getLinePoints(e)[0],i[0])});for(let s=0;s<e;s++){let e=0;this.modules.state.linesAvailable.reverse().forEach((r,o)=>{let a=this.modules.state.getLinePoints(r)[s];0===s?t[o].stepTo(i[s],e,!0):t[o].stepTo(i[s],e),e+=a})}t.forEach(t=>{t.finish(),this.oxGroup.appendChild(t.getAll()),this.charts[t.key]=t})}drawBarCharts(){const t=0!==this.maxPoint?this.height/this.maxPoint:1;let e=this.modules.state.linesAvailable.reverse().map(e=>new d({canvasHeight:this.height,stepX:this.stepX,kY:t,key:e}));const i=this.modules.state.daysCount,s=this.modules.state.getStacks();for(let t=0;t<i;t++){let i=0;this.modules.state.linesAvailable.reverse().forEach((r,o)=>{const a=this.modules.state.getLineColor(r);let h=this.modules.state.getLinePoints(r)[t];e[o].add(h,s[t],i,a),i+=h})}e.forEach(t=>{this.oxGroup.appendChild(t.getAll()),this.charts[t.key]=t})}get hiddenCharts(){return Object.entries(this.charts).filter(([t,e])=>e.isHidden).map(([t])=>t)}getMaxFromVisible(t=0,e=this.modules.state.daysCount,i){switch(this.modules.state.getCommonChartsType()){case"bar":return this.modules.state.getMaximumAccumulatedByColumns(t,t+e,this.hiddenCharts);default:case"line":return i?this.modules.state.getMaxForLineSliced(i,t,e,i):Math.max(...this.modules.state.linesAvailable.filter(t=>this.checkPathVisibility(t)).map(i=>this.modules.state.getMaxForLineSliced(i,t,e)))}}drawScaledLineCharts(){this.modules.state.linesAvailable.forEach(t=>{const e=this.modules.state.minForLine(t),i=this.modules.state.maxForLine(t),s=this.modules.state.getLinePoints(t);let r=this.height/(i-e),o=e*r;const a=new l({canvasHeight:this.height,isScaled:this.modules.state.isYScaled,max:i,color:this.modules.state.getLineColor(t),zeroShifting:o,kY:r,stroke:this.strokeWidth,stepX:this.stepX});a.moveTo(0,s[0]),s.forEach((t,e)=>{0===e?a.stepTo(t,!0):a.stepTo(t)}),this.oxGroup.appendChild(a.render()),this.charts[t]=a})}drawLineCharts(){this.modules.state.linesAvailable.forEach(t=>{const e=this.modules.state.getLinePoints(t),i=this.modules.state.getLineColor(t),s=e[0];this.kY=this.height/(this.maxPoint-this.minPoint),this.zeroShifting=this.minPoint*this.kY;const r=new l({canvasHeight:this.height,max:this.maxPoint,min:this.minPoint,color:i,zeroShifting:this.zeroShifting,kY:this.kY,stroke:this.strokeWidth,stepX:this.stepX});r.moveTo(0,s),e.forEach((t,e)=>{0===e?r.stepTo(t,!0):r.stepTo(t)}),this.oxGroup.appendChild(r.render()),this.charts[t]=r})}scroll(t){this.oxGroup.style.transform=`matrix(${this.modules.chart.scaling},0,0,1,${t},0)`}scaleLines(t){this.oxGroup.style.transform=`scaleX(${t})`,this.width=this.initialWidth*t}get step(){return this.stepX}scaleToMaxPoint(t,e,i){let s,r,o;if(e=function(t,e){let i=Math.log10(t)>>0,s=Math.pow(10,i),r=Math.floor(t/s)*s;return t-r>e&&(s=Math.pow(10,i-1),r=Math.floor(t/s)*s),r}(e,(t-e)/5),this.modules.state.isYScaled){const a=this.charts[i];s=a.max;let h=e*(r=a.kY),n=h-(o=a.zeroShifting),l=this.height/(t-e)/r;a.currentMinimum=e,a.path.style.transform=`scaleY(${l}) translateY(${n}px)`}else{if(s=this.maxPoint,r=this.kY,!this.zeroShifting||!e)return this.oyScaling=s/t,void(this.oyGroup.style.transform=`scaleY(${this.oyScaling})`);let i=this.height/(t-e),o=e*r,a=o-this.zeroShifting;this.oyScaling=i/r,this.zeroShiftingScaling=0!==a?o/this.zeroShifting:1,this.currentMinimum=e,this.oyGroup.style.transform=`scaleY(${this.oyScaling}) translateY(${a}px)`}}recalculatePointsHeight(t=!1){"bar"===this.modules.state.type?this.recalculateBars(t):"area"===this.modules.state.type&&this.recalculateArea(t)}recalculateArea(t=!1){const e=this.modules.state.daysCount,i=this.modules.state.getStacks();let s=this.modules.state.recalculatedValues;if(t&&s){for(let t=0,e=s.length;t<e;t++)0===s[t][1]?this.charts[s[t][0]].move(s[t][1],s[t][2],s[t][3],!0):this.charts[s[t][0]].move(s[t][1],s[t][2],s[t][3]);return void this.modules.state.clearRecalculatedValues()}let r=this.modules.state.linesAvailable.filter(t=>this.checkPathVisibility(t)).reverse();for(let t=0;t<e;t++){let e=0,s=this.hiddenCharts.reduce((e,i)=>e+this.modules.state.getLinePoints(i)[t],0);for(let o=0,a=r.length;o<a;o++){let a=i[t]-s,h=this.modules.state.getLinePoints(r[o])[t];this.modules.state.saveRecalculatedValues([r[o],t,a,e]),0===t?this.charts[r[o]].move(t,a,e,!0):this.charts[r[o]].move(t,a,e),e+=h}}Object.entries(this.charts).filter(([t,e])=>this.checkPathVisibility(t)).forEach(([t,e])=>{e.update()})}recalculateBars(t=!1){const e=this.modules.state.daysCount,i=this.modules.state.getStacks();let s=this.modules.state.recalculatedValues;if(t&&s){for(let t=0,e=s.length;t<e;t++)this.charts[s[t][0]].move(s[t][1],s[t][2],s[t][3]);return void this.modules.state.clearRecalculatedValues()}let r=this.modules.state.linesAvailable.filter(t=>this.checkPathVisibility(t)).reverse();for(let t=0;t<e;t++){let e=0,s=this.hiddenCharts.reduce((e,i)=>e+this.modules.state.getLinePoints(i)[t],0);for(let o=0,a=r.length;o<a;o++){let a=i[t]-s,h=this.modules.state.getLinePoints(r[o])[t];this.modules.state.saveRecalculatedValues([r[o],t,a,e]),this.charts[r[o]].move(t,a,e),e+=h}}}checkPathVisibility(t){return!this.charts[t].isHidden}togglePathVisibility(t,e){this.charts[t].toggleVisibility(e)}}class g{constructor(t){this.modules=t,this.nodes={wrapper:void 0,canvas:void 0,leftZone:void 0,leftZoneScaler:void 0,rightZone:void 0,rightZoneScaler:void 0,centerZone:void 0},this.wrapperWidthCached=void 0,this.viewportWidth=100,this.viewportWidthInitial=100,this.viewportOffsetLeft=0,this.scalerWidth=14,this.viewportWidthBeforeDrag=void 0,this.moveStartX=void 0,this.wrapperLeftCoord=void 0,this.viewportPressed=!1,this.leftScalerClicked=!1,this.rightScalerClicked=!1,this.scaleDebounce=void 0,this.leftZoneWidth=0,this.rightZoneWidth=0,this.wrapperRect=null,this.prevX=0,this.graph=new c(this.modules,{stroke:1,animate:!0})}static get CSS(){return{wrapper:"tg-minimap",leftZone:"tg-minimap__left",leftZoneScaler:"tg-minimap__left-scaler",rightZone:"tg-minimap__right",rightZoneScaler:"tg-minimap__right-scaler",centerZone:"tg-minimap__center"}}renderUi(){return this.nodes.wrapper=a("div",g.CSS.wrapper),this.nodes.leftZone=a("div",g.CSS.leftZone),this.nodes.centerZone=a("div",g.CSS.centerZone),this.nodes.rightZone=a("div",g.CSS.rightZone),this.nodes.leftZoneScaler=a("div",g.CSS.leftZoneScaler),this.nodes.rightZoneScaler=a("div",g.CSS.rightZoneScaler),this.nodes.leftZone.appendChild(this.nodes.leftZoneScaler),this.nodes.rightZone.appendChild(this.nodes.rightZoneScaler),this.nodes.wrapper.appendChild(this.nodes.leftZone),this.nodes.wrapper.appendChild(this.nodes.centerZone),this.nodes.wrapper.appendChild(this.nodes.rightZone),setTimeout(()=>{this.wrapperRect=this.nodes.wrapper.getBoundingClientRect()},100),this.bindEvents(),this.nodes.wrapper}renderMap(){this.nodes.canvas&&this.nodes.canvas.remove(),this.nodes.canvas=this.graph.renderCanvas({width:this.nodes.wrapper.offsetWidth,height:this.nodes.wrapper.offsetHeight}),this.graph.renderCharts(),this.setInitialPosition(),this.nodes.wrapper.appendChild(this.nodes.canvas)}get wrapperWidth(){return this.wrapperWidthCached||this.nodes.wrapper.offsetWidth}get width(){return this.wrapperWidth-this.leftZoneWidth-this.rightZoneWidth}set leftWidth(t){this.leftZoneWidth=t,this.nodes.leftZone.style.width=t+"px",this.nodes.centerZone.style.left=t+this.scalerWidth+"px"}set rightWidth(t){this.rightZoneWidth=t,this.nodes.rightZone.style.width=t+"px"}set width(t){const e=this.modules.chart.scrollDistance;this.leftWidth=e,this.rightWidth=this.wrapperWidth-e-t,this.viewportWidth=t,this.centerWidth=t}set centerWidth(t){this.nodes.centerZone.style.width=t-2*this.scalerWidth+"px"}setInitialPosition(){let t=this.nodes.wrapper.getBoundingClientRect();this.wrapperWidthCached=t.width,this.wrapperLeftCoord=t.left,this.width=this.modules.chart.minimalMapWidth,this.viewportWidthInitial=this.viewportWidthBeforeDrag=this.width,this.viewportOffsetLeft=this.wrapperWidth-this.viewportWidthInitial,this.moveViewport(this.viewportOffsetLeft),this.syncScrollWithChart(this.viewportOffsetLeft),this.modules.chart.fitToMax()}get scrolledValue(){return this.leftZoneWidth}get leftZoneMinimumWidth(){return 0}get leftZoneMaximumWidth(){return this.wrapperWidth-this.viewportWidthInitial-this.rightZoneWidth}get rightZoneMinimumWidth(){return this.viewportWidthInitial}get rightZoneMaximumWidth(){return this.wrapperWidth-this.viewportWidthInitial-this.scrolledValue}moveViewport(t){const e=this.width,i=this.wrapperWidth-e,s=this.leftZoneMinimumWidth;let r=this.viewportOffsetLeft+t;r<s?r=s:r>i&&(r=i),this.leftWidth=r,this.rightWidth=this.wrapperWidth-this.viewportWidthBeforeDrag-r}bindEvents(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}this.nodes.wrapper.addEventListener("mousedown",t=>{this.viewportMousedown(t)},!!t&&{passive:!0}),window.addEventListener("mousemove",t=>{this.viewportMousemove(t)},!!t&&{passive:!0}),window.addEventListener("mouseup",t=>{this.viewportMouseup(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("touchstart",t=>{this.viewportMousedown(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("touchmove",t=>{this.viewportMousemove(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("touchend",t=>{this.viewportMouseup(t)},!!t&&{passive:!0})}viewportMousedown(t){const{target:e}=t,i=!!e.closest(`.${g.CSS.leftZoneScaler}`),s=!!e.closest(`.${g.CSS.rightZoneScaler}`);if(this.viewportWidthBeforeDrag=this.width,this.moveStartX=n(t),i||s)return this.leftScalerClicked=i,this.rightScalerClicked=s,void(this.viewportPressed=!1);this.viewportPressed=!0}viewportMousemove(t){this.viewportPressed?this.viewportDragged(t):this.leftScalerClicked?this.scalerDragged(t,"left"):this.rightScalerClicked&&this.scalerDragged(t,"right")}viewportMouseup(){this.viewportPressed?this.finishSliding():this.leftScalerClicked?this.finishLeftScaling():this.rightScalerClicked&&this.finishRightScaling()}finishSliding(){this.viewportPressed=!1,this.viewportOffsetLeft=this.scrolledValue}finishLeftScaling(){this.leftScalerClicked=!1,this.viewportOffsetLeft=this.scrolledValue}finishRightScaling(){this.rightScalerClicked=!1,this.viewportOffsetLeft=this.scrolledValue}viewportDragged(t){let e=n(t)-this.moveStartX;this.scrolledValue;this.moveViewport(e),this.syncScrollWithChart(),this._ftmd&&clearTimeout(this._ftmd),this._ftmd=setTimeout(()=>{this.modules.chart.fitToMax(!0)},50)}syncScrollWithChart(t=null,e=!1){const i=(isNaN(parseInt(t))?this.scrolledValue:t)/this.wrapperWidth*this.modules.chart.width;this.modules.chart.scroll(i,e)}scalerDragged(t,e){let i,s=n(t),r=s-this.moveStartX,o=this.prevX<s?"right":"left";if(s>this.wrapperRect.right||s<this.wrapperRect.left)return;if(!r||this.prevX===s)return;if(this.prevX=s+0,"left"===e){if(r*=-1,(i=Math.max(0,this.viewportOffsetLeft-r))>this.leftZoneMaximumWidth)return;this.leftWidth=i,this.centerWidth=this.wrapperWidth-i-this.rightZoneWidth}else{if((i=Math.max(0,this.wrapperWidth-this.viewportOffsetLeft-(this.viewportWidthBeforeDrag+r)))>this.rightZoneMaximumWidth)return;this.rightWidth=i,this.centerWidth=this.wrapperWidth-i-this.leftZoneWidth}const a="left"===e?this.wrapperWidth-i-this.rightZoneWidth:this.wrapperWidth-this.leftZoneWidth-i,h=this.viewportWidthInitial/a*this.modules.chart.initialScale;this.modules.chart.scale(h,o),this.syncScrollWithChart("left"===e?i:this.leftZoneWidth,!0),this._ftmd&&clearTimeout(this._ftmd),this._ftmd=setTimeout(()=>{this.modules.chart.fitToMax()},20)}togglePath(t,e){this.graph.togglePathVisibility(t,e),"bar"===this.modules.state.type?(this.graph.recalculatePointsHeight(!0),this.fitToMax()):"area"===this.modules.state.type?this.graph.recalculatePointsHeight(!0):this.fitToMax()}fitToMax(){"area"!==this.modules.state.type&&(this.modules.state.isYScaled?this.modules.state.linesAvailable.filter(t=>this.modules.chart.notHiddenGraph(t)).forEach(t=>{this.graph.scaleToMaxPoint(this.graph.getMaxFromVisible(t),void 0,t)}):this.graph.scaleToMaxPoint(this.graph.getMaxFromVisible()))}}class u{constructor(t){this.modules=t,this.nodes={wrapper:void 0,title:void 0,values:void 0},this._width=0,this._values=[]}static get CSS(){return{wrapper:"tg-tooltip",showed:"tg-tooltip--showed",title:"tg-tooltip__title",values:"tg-tooltip__values",value:"tg-tooltip__values-item",valueTitle:"tg-tooltip__values-item-title"}}render(){return this.nodes.wrapper=a("div",u.CSS.wrapper),this.nodes.title=a("div",u.CSS.title),this.nodes.values=a("div",u.CSS.values),this.nodes.wrapper.appendChild(this.nodes.title),this.nodes.wrapper.appendChild(this.nodes.values),this.nodes.wrapper}show(){this.nodes.wrapper.classList.add(u.CSS.showed)}hide(){this.nodes.wrapper.classList.remove(u.CSS.showed)}move(t,e){this._width||(this._width=this.nodes.wrapper.offsetWidth);let i=t+-25;Math.max(...e.map(t=>t.value))*this.modules.chart.graph.kY-this.modules.chart.graph.zeroShifting>260&&(i-=this._width),i<this._width+25&&(i=t+25),i+this._width>this.modules.chart.viewportWidth&&(i-=this._width),this.nodes.wrapper.style.left=`${i}px`}clear(){this.nodes.title.textContent="",this.nodes.values.innerHTML=""}set values(t){this.clear();const e=this._values;this._values=[],this._setValuesDebounce&&clearTimeout(this._setValuesDebounce);let i=0;for(let e=0,s=t.length;e<s;e++)i+=t[e].value;t.length>2?this._setValuesDebounce=setTimeout(()=>{t.forEach(({name:i,value:s},r)=>{this.createItem(this.modules.state.names[i],this.modules.state.colors[i],s,e[r],r,t)}),"bar"===this.modules.state.type&&t.length>1&&this.createItem("All","#000",i,null,t.length,t,!0)},150):(t.forEach(({name:i,value:s},r)=>{this.createItem(this.modules.state.names[i],this.modules.state.colors[i],s,e[r],r,t)}),"bar"===this.modules.state.type&&t.length>1&&this.createItem("All","#000",i,null,t.length,t,!0))}createItem(t,e,i,s,r=0,o,n=!1){const l=a("div",u.CSS.value),d=a("b");if(n&&l.classList.add("all"),"area"===this.modules.state.type){let t=o.reduce((t,e)=>t+=e.value,0),e=Math.ceil(i/t*100);isNaN(e)&&(e=0);let s=a("span","percents");s.textContent=e+"%",l.appendChild(s)}let p=a("span",u.CSS.valueTitle);p.textContent=t,l.appendChild(p),l.appendChild(d),d.style.color=e;let c=(g=i,isNaN(parseInt(g,10))?"":g.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "));var g;setTimeout(()=>{h(d,c,s)},50*r),this.nodes.values.appendChild(l),this._values.push(c)}set title(t){this.nodes.title.innerHTML=t}set date(t){const e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];let s=t.getMonth(),r=t.getFullYear(),o=t.getDay(),n=t.getDate(),l=a("span","left"),d=a("span"),p="";this.modules.state.byMonth?(p=e[s]+" ",d.textContent=r):(p=`${i[o]}, ${n}`,d.textContent=e[s]+" "+r),this.nodes.title.innerHTML="",this.nodes.title.appendChild(l),this.nodes.title.appendChild(d),h(l,p,this._prevDate,"top"),this._prevDate=p}}class m{constructor(t){this.modules=t,this.nodes={wrapper:void 0},this.pointers={}}static get CSS(){return{wrapper:"tg-pointer",showed:"tg-pointer--showed",pointer:"tg-pointer__pointer",pointerHidden:"tg-pointer__pointer--hidden"}}render(){return this.nodes.wrapper=a("div",m.CSS.wrapper),this.nodes.wrapper.style.height=`${this.modules.state.height}px`,this.nodes.wrapper}show(){this.nodes.wrapper.classList.add(m.CSS.showed)}hide(){this.nodes.wrapper.classList.remove(m.CSS.showed)}move(t){this.show(),this.nodes.wrapper.style.left=`${t}px`}toggleVisibility(t){this.pointers[t]&&this.pointers[t].classList.toggle(m.CSS.pointerHidden)}showValues(t){if("area"===this.modules.state.type)return void(Object.keys(this.pointers).length&&(Object.values(this.pointers).forEach(t=>{t.remove()}),this.pointers={}));Object.keys(this.pointers).length||t.forEach(({name:t})=>{const e=a("div",m.CSS.pointer);e.style.borderColor=this.modules.state.colors[t],this.nodes.wrapper.appendChild(e),this.pointers[t]=e});const{graph:e}=this.modules.chart;t.forEach(({name:t,value:i})=>{const s=this.pointers[t],r=(i-e.currentMinimum)*e.kYScaled;s.style.transform=`translateY(-${r}px)`})}}class f{constructor(t){this.modules=t,this.nodes={wrapper:void 0,viewport:void 0,canvas:void 0,cursorLine:void 0,grid:void 0,gridLines:[],legend:void 0,legendDates:[],overlays:void 0,overlayLeft:void 0,overlayRight:void 0},this.tooltip=new u(this.modules),this.pointer=new m(this.modules),this.graph=new c(this.modules,{stroke:2}),this.wrapperLeftCoord=void 0,this.scaling=1,this.scrollValue=0,this.legendDateWidth=40,this.legendDateWidthMargins=40,this.legendDatesHidedTimes=0,this.legendDatesRecentlyHided=!1,this.onscreenDates=new Set,this.onscreenDatesElements={},this._datesPerScreenInitial=void 0,this._showEveryNDateInitial=void 0,this.cache={},this._initialScale=void 0,this._initialStep=void 0,this._hoveredPointIndex=void 0}get initialStep(){return this._initialStep||(this._initialStep=this.width/(this.modules.state.daysCount-1)),this._initialStep}get minimalMapWidth(){return Math.max(80,4*Math.ceil(this.viewportWidth/this.modules.state.daysCount))}get initialScale(){return this._initialScale}calculateInitialValues(){const t=this.viewportWidth/this.width,e=this.viewportWidth*t,i=this.minimalMapWidth/e,s=this.scaling/i;this.initialScale=s}set initialScale(t){this._initialScale=t,this.scale(t)}static get CSS(){return{wrapper:"tg-chart",viewport:"tg-chart__viewport",grid:"tg-grid",gridSection:"tg-grid__section",gridSectionHidden:"tg-grid__section--hidden",gridCounter:"tg-grid__counter",gridCounterHidden:"tg-grid__counter--hidden",gridCounterFirst:"tg-grid__counter--first",gridCounterSecond:"tg-grid__counter--second",dateHidden:"tg-legend__date--hidden",overlays:"tg-chart__overlays",overlayLeft:"tg-chart__overlay-left",overlayRight:"tg-chart__overlay-right"}}get stepX(){return this.graph.stepX}get stepY(){return this.graph.stepY}get maxPoint(){return this.graph.maxPoint}get height(){return this.graph.height}get width(){return this.graph.width}get scrollDistance(){return this.scrollValue*this.scaling}get viewportWidth(){return this.cache.viewportWidth?this.cache.viewportWidth:(this.cache.viewportWidth=this.nodes.wrapper.offsetWidth,this.cache.viewportWidth)}get viewportHeight(){return this.cache.viewportHeight?this.cache.viewportHeight:(this.cache.viewportHeight=this.nodes.wrapper.offsetHeight,this.cache.viewportHeight)}renderUi(){return this.nodes.wrapper=a("div",f.CSS.wrapper),this.nodes.viewport=a("div",f.CSS.viewport),this.nodes.cursorLine=this.pointer.render(),this.nodes.wrapper.appendChild(this.nodes.viewport),this.nodes.wrapper.appendChild(this.nodes.cursorLine),this.nodes.wrapper.appendChild(this.tooltip.render()),this.nodes.wrapper.classList.add(f.CSS.wrapper+"--"+this.modules.state.type),this.bindEvents(),this.nodes.wrapper}renderCharts(){this.calculateWrapperCoords(),this.nodes.canvas&&this.nodes.canvas.remove(),this.nodes.canvas=this.graph.renderCanvas({width:this.nodes.viewport.offsetWidth,height:this.modules.state.height}),this.nodes.viewport.appendChild(this.nodes.canvas),this.calculateInitialValues(),this.graph.renderCharts(),this.renderGrid(),this.renderLegend(),this.renderOverlays()}createLine(){const t=a("div",f.CSS.gridSection);return this.nodes.grid.appendChild(t),this.nodes.gridLines.push(t),t}getLegendStep(t,e,i,s,r){let o=t-e,a=o/i,h=Math.log10(o)>>0,n=Math.pow(10,h)/2,l=(a=Math.ceil(a/n)*n)*i*s;return l>this.height&&(a/=l/this.height>>0),a}getLegendCounter(t,e,i){let s=a("span",f.CSS.gridCounter),r=function(t){if(t<1e3)return t;if(t<1e4){let e=Math.floor(t/1e3),i=t-1e3*e;return 0===i?e+" 000":i>=100?e+" "+i:e+" 0"+i}return t<1e6?Math.floor(t/1e3)+"k":Math.floor(t/1e6)+"M"}(Math.round(t));return"area"===this.modules.state.type&&(r+="%"),s.textContent=r,s.dataset.name=e,i?s.classList.add(f.CSS.gridCounterSecond):s.classList.add(f.CSS.gridCounterFirst),s}renderGrid(){var t,e;this.nodes.grid||(this.nodes.grid=a("div",f.CSS.grid),this.nodes.grid.style.height=`${this.modules.state.height}px`,this.nodes.gridLines=[],t=this.nodes.canvas,e=this.nodes.grid,t.parentNode.insertBefore(e,t));let i,s,r,o,h=this.height,n=this.getMaxVisiblePoint(),l=this.modules.state.isYScaled?this.graph.charts[0].currentMinimum:this.graph.currentMinimum||0,d=h/(n-l),p=5,c=this.getLegendStep(n,l,p,d);if(this.modules.state.isYScaled){let t=d/(s=h/((r=this.getMaxVisiblePoint("1"))-(o=this.getMinVisiblePoint("1"))));i=this.getLegendStep(r,o,p,s,t)}"area"===this.modules.state.type&&(c=25,p=5,d=h/(n=100)),this.nodes.gridLines.length&&this.nodes.gridLines.forEach(t=>{t.classList.add(f.CSS.gridSectionHidden)});for(let t=0;t<=p;t++){let e,s=t*c;if(e=this.nodes.gridLines.length&&this.nodes.gridLines[t]?this.nodes.gridLines[t]:this.createLine(),0===t&&e.classList.add("no-animation"),s*d>this.height)continue;e.classList.remove(f.CSS.gridSectionHidden),e.style.bottom=`${s*d}px`,e.innerHTML="";let r=this.getLegendCounter(s+l,"0");if(e.appendChild(r),i){r.style.color=this.modules.state.getLineColor("0");let s=this.getLegendCounter(t*i+o,"1",!0);s.style.color=this.modules.state.getLineColor("1"),e.appendChild(s)}}this.modules.state.isYScaled&&this.toggleGridLabelsForChart()}checkDateShouldBeHidden(t){let e=Math.round((this.onscreenPointsCount/this.datesPerScreen-this._showEveryNDateInitial)/this._showEveryNDateInitial),i=[];for(let s=1;s<e+1;s++){let e=(t+s*this._showEveryNDateInitial)%(2*this._showEveryNDateInitial*s)==0;i.push(e)}return i.some(t=>!!t)}moveDate(t){let e=this.onscreenDatesElements[t],i="translateX(-85%)",s=t*this.stepScaled+this.scrollValue;0===t&&(i=""),t===this.modules.state.daysCount-1&&(i="translateX(-100%)"),e.style.transform=`translateX(${s}px)`+i,this.checkDateShouldBeHidden(t)?e.classList.add("hided"):e.classList.remove("hided")}pushDate(t,e,i){if(this.checkDateShouldBeHidden(e))return;const s=new Date(t),r=a("time");this.modules.state.byMonth?r.textContent=s.toLocaleDateString("en-US",{month:"short"}):r.textContent=s.toLocaleDateString("en-US",{day:"numeric",month:"short"}),this.nodes.legend.appendChild(r),this.nodes.legendDates.push(r),this.onscreenDates.add(e),this.onscreenDatesElements[e]=r,this.moveDate(e)}get onscreenPointsCount(){return Math.floor(this.viewportWidth/this.stepScaled)}get rightPointIndex(){return this.leftPointIndex+this.onscreenPointsCount}get datesPerScreen(){return this._datesPerScreenInitial||(this._datesPerScreenInitial=Math.floor(this.viewportWidth/(this.legendDateWidth+this.legendDateWidthMargins))),this._datesPerScreenInitial}get stepScaled(){return this.stepX*this.scaling}addOnscreenDates(){let t=this.modules.state.dates.slice(this.leftPointIndex,this.rightPointIndex+2),e=new Set;if(!this._showEveryNDateInitial){let t=this.rightPointIndex-this.leftPointIndex;this._showEveryNDateInitial=Math.ceil(t/this.datesPerScreen)}let i=0;t.forEach((t,s)=>{const r=this.leftPointIndex+s;if(r%this._showEveryNDateInitial==0){if(e.add(r),this.onscreenDates.has(r))return this.moveDate(r),void i++;this.pushDate(t,r,i),i++}}),this.onscreenDates.forEach(t=>{e.has(t)||this.removeDate(t)})}removeDate(t){this.onscreenDatesElements[t]&&(this.onscreenDates[t]=null,this.onscreenDates.delete(t),this.onscreenDatesElements[t].remove(),this.onscreenDatesElements[t]=null)}renderLegend(){var t,e;this.nodes.legend=a("footer"),t=this.nodes.canvas,e=this.nodes.legend,t.parentNode.insertBefore(e,t.nextSibling)}scroll(t,e){this.scrollValue=-1*t,this.graph.scroll(this.scrollValue),this.tooltip.hide(),this.pointer.hide(),this.hideBarHighlighting(),this.addOnscreenDates(),this._sd&&clearTimeout(this._sd),this._sd=setTimeout(()=>{const t=this.modules.state.dates[this.rightPointIndex]||this.modules.state.dates[this.rightPointIndex-1];this.modules.header.setPeriod(this.modules.state.dates[this.leftPointIndex],t)},50)}scale(t,e){this.graph.scaleLines(t,e),this.scaling=t}get leftPointIndex(){return Math.ceil(-1*this.scrollValue/this.graph.step/this.scaling)}notHiddenGraph(t){return this.graph.checkPathVisibility(t)}get pointsVisible(){const t=this.graph.step;return Math.round(this.viewportWidth/t/this.scaling)}getMaxVisiblePoint(t){return this.graph.getMaxFromVisible(this.leftPointIndex,this.pointsVisible+1,t)}getMinVisiblePoint(t){const e=Math.max(0,this.leftPointIndex-1);return t?this.modules.state.getMinForLineSliced(t,e,this.pointsVisible+1):Math.min(...this.modules.state.linesAvailable.filter(t=>this.notHiddenGraph(t)).map(t=>this.modules.state.getMinForLineSliced(t,e,this.pointsVisible+1)))}fitToMax(){"area"!==this.modules.state.type&&(this.modules.state.isYScaled?this.modules.state.linesAvailable.filter(t=>this.notHiddenGraph(t)).forEach(t=>{this.graph.scaleToMaxPoint(this.getMaxVisiblePoint(t),this.getMinVisiblePoint(t),t)}):this.graph.scaleToMaxPoint(this.getMaxVisiblePoint(),this.getMinVisiblePoint())),this.nodes.grid&&(this._gd&&clearTimeout(this._gd),this._gd=setTimeout(()=>{this.renderGrid()},15))}calculateWrapperCoords(){let t=this.nodes.wrapper.getBoundingClientRect();this.wrapperLeftCoord=t.left}bindEvents(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}this.nodes.wrapper.addEventListener("mousemove",t=>{this.mouseMove(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("mouseleave",t=>{this.mouseLeave(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("touchmove",t=>{this.mouseMove(t)},!!t&&{passive:!0}),this.nodes.wrapper.addEventListener("touchcancel",t=>{this.mouseLeave(t)},!!t&&{passive:!0})}mouseMove(t){let e=n(t)-this.wrapperLeftCoord,i=this.graph.stepX*this.scaling,s=this.scrollValue%i,r=Math.round((e-s)/this.graph.stepX/this.scaling)-1;0===this.leftPointIndex&&(r+=1);let o=r+this.leftPointIndex;if(o===this._hoveredPointIndex)return;Math.abs(s),this._hoveredPointIndex=o;let a=(r+1)*i+s;if(0===this.leftPointIndex&&(a=r*i+s),this.stepScaled,a<0||a>this.viewportWidth)return;this.tooltip.show(),"bar"===this.modules.state.type?this.highlightBar(r,s):this.pointer.move(a);const h=this.modules.state.linesAvailable.filter(t=>this.notHiddenGraph(t)).map(t=>({name:t,value:this.modules.state.getLinePoints(t)[o]}));h.length?this.pointer.showValues(h):this.tooltip.hide();const l=this.modules.state.dates[o];l&&(this.tooltip.values=h,this.tooltip.move(a,h),this.tooltip.date=new Date(l))}mouseLeave(){this.tooltip.hide(),this.pointer.hide(),this.hideOverlays()}togglePath(t,e){this.graph.togglePathVisibility(t,e),this.pointer.toggleVisibility(t),"bar"===this.modules.state.type?(this.graph.recalculatePointsHeight(),this.fitToMax()):"area"===this.modules.state.type?this.graph.recalculatePointsHeight():this.fitToMax()}toggleGridLabelsForChart(){this.modules.state.linesAvailable.forEach(t=>{this.nodes.grid.querySelectorAll(`[data-name="${t}"]`).forEach(e=>{e.classList.toggle(f.CSS.gridCounterHidden,!this.graph.checkPathVisibility(t))})})}highlightBar(t,e){this.nodes.overlays.style.opacity="1";let i=t*this.stepScaled+e-this.stepScaled/2;0!==e&&(i+=this.stepScaled);let s=i+this.stepScaled,r=Math.max(0,this.onscreenPointsCount-t)*this.stepScaled-e;this.nodes.overlayLeft.setAttribute("width",Math.max(0,i)),this.nodes.overlayRight.setAttribute("x",s),this.nodes.overlayRight.setAttribute("width",Math.max(0,r))}hideBarHighlighting(){this.nodes.overlays.style.opacity="0"}renderOverlays(){this.nodes.overlays=a("g"),this.nodes.overlays.setAttribute("class",f.CSS.overlays),this.nodes.overlayLeft=a("rect"),this.nodes.overlayLeft.setAttribute("class",f.CSS.overlayLeft),this.nodes.overlayRight=a("rect"),this.nodes.overlayRight.setAttribute("class",f.CSS.overlayRight);this.nodes.overlayLeft.setAttribute("x",0),this.nodes.overlayRight.setAttribute("x",this.viewportWidth-0),this.nodes.overlayLeft.setAttribute("y",0),this.nodes.overlayRight.setAttribute("y",0),this.nodes.overlayLeft.setAttribute("width",0),this.nodes.overlayRight.setAttribute("width",0),this.nodes.overlayLeft.setAttribute("height",this.viewportHeight),this.nodes.overlayRight.setAttribute("height",this.viewportHeight),this.nodes.overlays.appendChild(this.nodes.overlayLeft),this.nodes.overlays.appendChild(this.nodes.overlayRight),this.graph.canvas.appendChild(this.nodes.overlays)}hideOverlays(){this.nodes.overlays.style.opacity=0}destroy(){this.nodes.canvas.remove(),this._datesPerScreenInitial=void 0,this._showEveryNDateInitial=void 0,this.nodes.overlays&&this.nodes.overlays.remove(),this.nodes.legend&&this.nodes.legend.remove(),this.scaling=1,this.scrollValue=0}}class v{constructor(t){this.modules=t,this.nodes={wrapper:void 0},this.buttons={}}static get CSS(){return{wrapper:"tg-legend",item:"tg-legend__item",itemWobble:"tg-legend__item--wobble",itemSelected:"tg-legend__item--selected",itemEnabled:"tg-legend__item--enabled",checkbox:"tg-legend__checkbox"}}render(){return this.nodes.wrapper=a("div",v.CSS.wrapper),Object.entries(this.modules.state.names).map(([t,e])=>({name:t,title:e})).forEach(({name:t,title:e})=>{let i=a("div",[v.CSS.item,v.CSS.itemEnabled]),s=a("span",v.CSS.checkbox);i.appendChild(s),i.appendChild(document.createTextNode(e)),this.buttons[t]=i,this._clickPrevented=!1,i.addEventListener("click",()=>{this._clickPrevented||this.itemClicked(t)}),i.addEventListener("mousedown",()=>{this.mousedown(t)}),i.addEventListener("touchstart",()=>{this.mousedown(t)}),i.addEventListener("mouseup",()=>{this.mouseup(t)}),i.addEventListener("touchend",()=>{this.mouseup(t)}),this.toggle(t,!0),this.nodes.wrapper.appendChild(i)}),this.nodes.wrapper}mousedown(t){this._timer=setTimeout(()=>{this._clickPrevented=!0,this.uncheckAllExceptPassed(t)},500)}uncheckAllExceptPassed(t){Object.entries(this.buttons).forEach(([e,i],s)=>{e!==t?(this.toggle(e,!1),this.modules.chart.togglePath(e,!0),this.modules.minimap.togglePath(e,!0)):(this.toggle(e,!0),this.modules.chart.togglePath(e,!1),this.modules.minimap.togglePath(e,!1))})}mouseup(t){this._timer&&(setTimeout(()=>{this._clickPrevented=!1},400),clearTimeout(this._timer))}itemClicked(t){let e=1===this.modules.state.linesAvailable.filter(t=>this.modules.chart.graph.checkPathVisibility(t)).length;if(this.buttons[t].classList.contains(v.CSS.itemEnabled)){if(e)return this.buttons[t].classList.add(v.CSS.itemWobble),void setTimeout(()=>{this.buttons[t].classList.remove(v.CSS.itemWobble)},300);this.toggle(t,!1)}else this.toggle(t,!0);this.modules.chart.togglePath(t),this.modules.minimap.togglePath(t)}toggle(t,e=!0){const i=this.buttons[t].querySelector(`.${v.CSS.checkbox}`);this.buttons[t].classList.toggle(v.CSS.itemEnabled,e),i.style.backgroundColor=e?this.modules.state.colors[t]:"#EFEFEF"}}class b{constructor(t){this.modules=t,this.nodes={wrapper:void 0,title:void 0,dates:void 0,typeSwitchers:[],detailsTogglers:[]}}static get CSS(){return{wrapper:"tg-header",title:"tg-header__title",dates:"tg-header__dates",typeSwitcher:"tg-header__type-switcher",typeSwitcherCurrent:"tg-header__type-switcher--current",detailsToggler:"tg-header__details",detailsTogglerItem:"tg-header__details-item",detailsTogglerItemCurrent:"tg-header__details-item--current"}}render(){return this.nodes.wrapper=a("div",b.CSS.wrapper),this.nodes.title=a("div",b.CSS.title),this.nodes.dates=a("div",b.CSS.dates),this.nodes.title.textContent=this.modules.state.title||"Untitled",this.nodes.wrapper.appendChild(this.nodes.title),this.modules.dataByMonth&&this.appendDetailsToggler(),this.modules.showTypeSwitchers&&[{type:"line",icon:'<svg width="17" height="9" xmlns="http://www.w3.org/2000/svg" style="margin: auto -2px;">\n                <path d="M13.638 4.28l-1.566 1.5c.147.294.23.623.23.97 0 1.243-1.053 2.25-2.35 2.25-1.298 0-2.35-1.007-2.35-2.25 0-.094.006-.187.018-.278L5.317 5.37c-.422.39-.997.63-1.63.63-.302 0-.59-.054-.854-.153L1 8 0 7l1.717-2.023a2.172 2.172 0 0 1-.38-1.227c0-1.243 1.052-2.25 2.35-2.25 1.297 0 2.349 1.007 2.349 2.25 0 .094-.006.187-.018.278L8.321 5.13c.422-.39.997-.63 1.63-.63.363 0 .707.079 1.014.22l1.565-1.5a2.163 2.163 0 0 1-.229-.97c0-1.243 1.052-2.25 2.35-2.25C15.948 0 17 1.007 17 2.25S15.948 4.5 14.65 4.5c-.362 0-.706-.079-1.012-.22zm-9.952.22c.433 0 .784-.336.784-.75S4.119 3 3.686 3c-.432 0-.783.336-.783.75s.35.75.783.75zm6.266 3c.432 0 .783-.336.783-.75S10.385 6 9.952 6c-.433 0-.784.336-.784.75s.351.75.784.75zM14.65 3c.432 0 .783-.336.783-.75s-.35-.75-.783-.75c-.433 0-.784.336-.784.75s.351.75.784.75z"/>\n              </svg>'},{type:"area",icon:'<svg width="15" height="13" xmlns="http://www.w3.org/2000/svg" style="margin: auto -1px;">\n                <path d="M15 7.952L6.032 9.233 3.765 6.21 0 8.36V5.382l3.557-2.371 4.884 3.488L15 4.531v3.42zm0 1.443v1.462a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-.85l3.378-1.931 2.019 2.69L15 9.396zm0-6.355L8.702 4.93 3.585 1.274 0 3.665V2a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v1.04z"/>\n              </svg>'},{type:"bar",icon:'<svg width="14" height="13" xmlns="http://www.w3.org/2000/svg">\n                <rect y="7" width="2" height="6" rx="1"/>\n                <rect x="12" y="6" width="2" height="7" rx="1"/>\n                <rect x="4" y="4" width="2" height="9" rx="1"/>\n                <rect x="8" width="2" height="13" rx="1"/>\n              </svg>'}].forEach(({type:t,icon:e})=>{const i=a("span",b.CSS.typeSwitcher);t===this.modules.state.type&&i.classList.add(b.CSS.typeSwitcherCurrent),i.innerHTML=e,i.addEventListener("click",()=>{this.typeSwitcherClicked(t,i)}),this.nodes.typeSwitchers.push(i),this.nodes.wrapper.appendChild(i)}),this.nodes.wrapper.appendChild(this.nodes.dates),this.nodes.wrapper}appendDetailsToggler(){const t=a("span",b.CSS.detailsToggler);[{title:"Day",dataStoringProperty:"data"},{title:"Month",dataStoringProperty:"dataByMonth"}].forEach(({title:e,dataStoringProperty:i},s)=>{const r=a("span",b.CSS.detailsTogglerItem);0===s&&r.classList.add(b.CSS.detailsTogglerItemCurrent),r.innerHTML=e,r.addEventListener("click",()=>{this.detailsTogglerClicked(i,r)}),t.appendChild(r),this.nodes.detailsTogglers.push(r)}),this.nodes.wrapper.appendChild(t)}typeSwitcherClicked(t,e){this.modules.state.type=t,this.modules.state.clearRecalculatedValues(),this.modules.chart.destroy(),this.modules.chart.renderCharts(),this.modules.minimap.renderMap(),this.modules.minimap.syncScrollWithChart(),this.nodes.typeSwitchers.forEach(t=>t.classList.remove(b.CSS.typeSwitcherCurrent)),e.classList.add(b.CSS.typeSwitcherCurrent)}detailsTogglerClicked(t,e){this.modules.createState(t),this.modules.chart.destroy(),this.modules.chart.renderCharts(),this.modules.minimap.renderMap(),this.modules.minimap.syncScrollWithChart(),this.nodes.detailsTogglers.forEach(t=>t.classList.remove(b.CSS.detailsTogglerItemCurrent)),e.classList.add(b.CSS.detailsTogglerItemCurrent)}setPeriod(t,e){this._sd=setTimeout(()=>{let i=new Date(t).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),s=new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});this.nodes.dates.innerHTML=`${i} - ${s}`},20)}}i.d(e,"default",function(){return w});class w{constructor({holderId:t,data:e,dataByMonth:i,colors:s,titles:r,type:o,title:a,byMonth:h,scaled:n,height:l=350,showLegend:d=!0,showTypeSwitchers:p=!0}){this.holder=document.getElementById(t),this.loadStyles(),this.data=e?e.trim():null,this.dataByMonth=i?i.trim():null,this.colors=s,this.type=o,this.title=a,this.titles=r,this.byMonth=h,this.scaled=n,this.height=l,this.showLegend=d,this.showTypeSwitchers=p,this.createState(),this.minimap=new g(this),this.chart=new f(this),this.legend=new v(this),this.header=new b(this),this.prepareUi(),this.chart.renderCharts(),this.minimap.renderMap()}static get CSS(){return{nightModeEnabled:"tg--night-mode"}}createState(t="data"){this.byMonth="dataByMonth"===t,this.state=new o(this[t],this.colors,this.titles,this.type,this.title,this.byMonth,this.scaled,this.height)}loadStyles(){if(document.getElementById("specc-graph-styles"))return;const t=document.createElement("style"),e=document.querySelector("head");t.id="specc-graph-styles",t.textContent=r.a,e.appendChild(t)}prepareUi(){this.holder.appendChild(this.header.render()),this.holder.appendChild(this.chart.renderUi()),this.holder.appendChild(this.minimap.renderUi()),this.showLegend&&this.holder.appendChild(this.legend.render())}toggleNightMode(){this.holder.classList.toggle(w.CSS.nightModeEnabled)}}}]).default});
//# sourceMappingURL=main.js.map